# Linux Server မှာ UDMA CRC Error တွေကို ရှာဖွေပြဿနာဖြေရှင်းနည်း

**ရေးသားသူ:** [သင့်နာမည်]  
**နေ့စွဲ:** [လိုအပ်တဲ့နေ့စွဲထည့်ပါ]

---

## မိတ်ဆက်

ကျွန်တော်တို့ရဲ့ Proxmox-based Linux server တစ်ခုမှာ ZFS pool degrade ဖြစ်တာနဲ့ အချို့ VM တွေ I/O error တက်တာတွေကြုံခဲ့ရပါတယ်။ စစ်ဆေးကြည့်တဲ့အခါ **UDMA CRC Error** တွေက အကြောင်းပြချက်ဖြစ်နေတယ်ဆိုတာတွေ့ခဲ့ရပါတယ်။

ဒီ error တွေကို `smartctl` နဲ့ ဘယ်လိုစစ်တယ်၊ ဘယ်လိုဖြေရှင်းတယ်ဆိုတာ ဒီဘလော့မှာရှင်းပြပေးပါတယ်။ ဒီနည်းလမ်းက သင့် server တွေရဲ့ HDD/SSD ပြဿနာတွေကို အလွယ်တကူပြုပြင်နိုင်စေပါလိမ့်မယ်။

---

## UDMA CRC Error ဆိုတာဘာလဲ?

**`UDMA_CRC_Error_Count` (SMART ID 199)** ဆိုတာဟာ HDD/SSD နဲ့ Motherboard (SATA port) ကြားမှာ **data transmission error (သတင်းအချက်အလက်များအမှန်တကယ်ရောက်မသွား)** ဖြစ်နေတဲ့အချိန်မှတ်သားထားတဲ့အရာပါ။

ဒါဟာ Disk ရဲ့ စက်ပိုင်းဆိုင်ရာချို့ယွင်းချက်မဟုတ်ပါဘူး။ အကြောင်းအများစုက:

- နေရာမတော်တဲ့ SATA cable  
- SATA port မကောင်းတာ  
- Power cable အဆင်မပြေတာ  

---

## အဆင့် (၁) ပြဿနာရှာဖွေခြင်း

Linux shell ထဲမှာ ဒီအတိုင်းစစ်ပါ။

```bash
smartctl -a /dev/sdX | grep -i crc

ဥပမာ Output:
```bash
199 UDMA_CRC_Error_Count ... RAW_VALUE = 21


ဒါက စနစ်တကျ cable connection မကောင်းတာနဲ့ ပါတယ်။ အချို့ disk တွေမှာတော့ 4, 12 စတဲ့အရေအတွက်နဲ့ error တွေရှိနေပါတယ်။

⸻

အဆင့် (၂) ပြဿနာအကြောင်းရင်း

ကြည့်လိုက်တဲ့အခါ:
	•	Disk ၃ လုံးမှာ error တက်နေတာကိုတွေ့ရတယ်
	•	SATA cables တွေဟာ အဟောင်းတွေဖြစ်တယ်
	•	Power cables တွေကို daisy-chain (တူတူ share) လုပ်ထားတာတွေ့ရတယ်

ဒါကြောင့် စနစ်တကျ မတပ်ဆင်ဘဲ ဒေတာက အမှားတွေနဲ့ ရောက်နေတဲ့အခြေအနေဖြစ်ပါတယ်။

⸻

အဆင့် (၃) ဖြေရှင်းနည်း

ပြုပြင်ခဲ့တဲ့အရာများ:
	1.	SATA cables အားလုံးကို အသစ်တပ်ပြောင်းလိုက်သည်
	2.	Disk တစ်လုံးစီကို Motherboard ထဲက အခြား SATA port အသစ်တွေနဲ့ ချိတ်ဆက်လိုက်သည်
	3.	Power cables တွေကို disk တစ်လုံးစီ အတွက် အသစ်ထပ်ခါထပ်ခါ မျှဝေရတာမဟုတ်အောင် ပြောင်းလဲတပ်ဆင်သည်

⸻

အဆင့် (၄) ပြဿနာပြေလား စစ်ခြင်း

ပြုပြင်ပြီးနောက် smartctl နဲ့ ထပ်စစ်ကြည့်လိုက်တယ်:

```bash
smartctl -a /dev/sdX | grep -i crc

တစ်လုံးမှာ 21 ဖြစ်နေတဲ့ CRC Error ဟာ တူတူပဲရှိနေတယ် (မတိုးတော့)။

ZFS pool ကိုလည်းစစ်ကြည့်ပါတယ်:

zpool status

ဖြစ်ရမှာက ONLINE ဖြစ်ပြီး "No known data errors" ဆိုတာမြင်ရပါလိမ့်မယ်။

နိဂုံးချုပ်

UDMA CRC Error တွေဟာ Disk ပျက်တာမဟုတ်ဘဲ SATA cable သို့မဟုတ် port ပတ်ဝန်းကျင်က ချို့ယွင်းမှုကြောင့်ဖြစ်ပါတယ်။ Disk တွေကိုပြန်မတင်ခင် SATA cable နှင့် port တို့ကိုစစ်ဆေးသင့်ပါတယ်။

ပြဿနာဖြေရှင်းဖို့:
	•	SATA cable အသစ်တပ်
	•	Port အသစ်အသုံးပြု
	•	Power cable အသီးသီးသုံး
	•	CRC Count မတိုးတော့အောင် စောင့်ကြည့်

⸻

Bonus – ZFS Pool Error ပြန်ရှင်းချင်ရင်

zpool clear tank

ဆိုတာသုံးပြီး ZFS error logs (history only) ကိုပြန်ရှင်းုစိတ်ရှည်ရှည် းြီးဖ်ပေးတဲ့အကျေးဇူးတင်ပါတယ်
